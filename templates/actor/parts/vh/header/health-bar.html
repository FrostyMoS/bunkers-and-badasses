<svg id="{{key}}Bar" viewBox="0 0 400 50" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
  <defs>
    <style>
      #{{key}}Bar {
        --hpPercent: {{#calcPercent value max}}{{/calcPercent}};
      }
    </style>

    <pattern id="{{key}}Patt"
      x="0" y="0" width="24" height="40" 
      patternUnits="userSpaceOnUse" patternTransform="scale(1,1) translate(4, 0)"
    >
      <desc>Hitpoint Pattern</desc>
      <animateTransform attributeType="xml" attributeName="patternTransform"
        type="translate" from="24" to="0" begin="0" dur="3s" repeatCount="indefinite"
      />
      <symbol id="parthpBar">
        <polygon points="0,10 10,10 10,30 0,30"/>
      </symbol>
      <use href="#parthpBar" class="hp-light" transform="translate(0, 0)" />
      <use href="#parthpBar" class="hp-light" transform="translate(9.5,0)" />
      <use href="#parthpBar" class="hp-light" transform="translate(14,0)" />
      <use href="#parthpBar" class="hp-light" transform="translate(0,15)" />
      <use href="#parthpBar" class="hp-light" transform="translate(9.5,15)" />
      <use href="#parthpBar" class="hp-dark" transform="translate(14,15)" />
    </pattern>

    <pattern id="{{key}}Honeycomb"
      x="0" y="0" width="30.6" height="18.2"
      patternUnits="userSpaceOnUse" patternTransform="scale(1,1)"
    >
      <desc>honeycomb</desc>
      <animateTransform attributeType="xml"
        attributeName="patternTransform"
        type="translate" from="30.6" to="0" begin="0"
        dur="4s" repeatCount="indefinite"
      />
      <symbol id="shieldSingleComb" fill="var(--healthbarDark)">
        <polygon points="5.6,0.2 16,0.2 21.2,9.2 16,18.2 5.6,18.2 0.4,9.2" />
      </symbol>
      <use href="#shieldSingleComb" transform="translate(-5.3,0)" />
      <use href="#shieldSingleComb" transform="translate(10,9)" />
      <use href="#shieldSingleComb" transform="translate(10,-9)" />
      <use href="#shieldSingleComb" transform="translate(25.2,0)" />
    </pattern>

    <pattern id="{{key}}WavePatt"
      x="0" y="0" width="240" height="40"
      patternUnits="userSpaceOnUse" patternTransform="scale(1,1) translate(4, 0)"
    >
      <desc>Armor Pattern</desc>
      <animateTransform attributeType="xml" attributeName="patternTransform"
        type="translate" from="240" to="0" begin="0" dur="30s" repeatCount="indefinite"
      />
      <path id="LYLine"  class="armorPatLine" d="m-20,35 l20,-20 l100,0 l20,20 l100,0 l20,-20 l20,0" />
      <path id="MYLine" class="armorPatLine" d="m-20,15 l20,20 l100,0 l20,-20 l100,0 l20,20 l20,0" />
    </pattern>

    <pattern id="greyLine" 
      x="0" y="0" width="20" height="20" 
      patternUnits="userSpaceOnUse" patternTransform="scale(0.2, 0.2)"
    >
      <desc>greyLine</desc>
      <symbol id="line">
        <polygon points="0,0 20,0 20,10 0,10"/>
      </symbol>
      <use href="#line" fill="#ddd"/>
      <use href="#line" transform="translate(0,10)" fill="#bbbbbb"/>
    </pattern>
  </defs>
  <path class="health-bars healthbar-background" d="m20,10 l330,0 l30,30 l-360,0 z" />
  <path class="health-bars healthbar-foreground" d="m20,10 l330,0 l30,30 l-360,0 z" />
</svg>