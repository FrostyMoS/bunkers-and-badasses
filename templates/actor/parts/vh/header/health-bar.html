<svg id="hpBar" viewBox="0 0 400 50"i xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
  <defs>
    <style>
      #hpBar {
        --healthPc: {{#calcPercent value max}}{{/calcPercent}};
      }
    </style>
    <pattern id="hpPatt" 
      x="0" y="0" width="24" height="40" 
      patternUnits="userSpaceOnUse" patternTransform="scale(1,1) translate(4, 0)"
    >
      <desc>Hitpoint Pattern</desc>
      <animateTransform attributeType="xml" attributeName="patternTransform"
        type="translate" from="24" to="0" begin="0" dur="3s" repeatCount="indefinite"
      />
      <symbol id="parthpBar">
        <polygon points="0,10 10,10 10,30 0,30"/>
      </symbol>
      <use href="#parthpBar" class="healthHpLight" transform="translate(0, 0)" />
      <use href="#parthpBar" class="healthHpLight" transform="translate(9.5,0)" />
      <use href="#parthpBar" class="healthHpLight" transform="translate(14,0)" />
      <use href="#parthpBar" class="healthHpLight" transform="translate(0,15)" />
      <use href="#parthpBar" class="healthHpLight" transform="translate(9.5,15)" />
      <use href="#parthpBar" class="healthHpDark" transform="translate(14,15)" />
    </pattern>
    <pattern id="greyLine"
      x="0" y="0" width="20" height="20" 
      patternUnits="userSpaceOnUse" patternTransform="scale(0.2, 0.2)"
    >
      <desc>greyLine</desc>
      <symbol id="line">
        <polygon points="0,0 20,0 20,10 0,10"/>
      </symbol>
      <use href="#line" fill="#ddd"/>
      <use href="#line" transform="translate(0,10)" fill="#bbbbbb"/>
    </pattern>
  </defs>
  <path id="healthBackground" class="healthBars" d="m20,10 l330,0 l30,30 l-360,0 z" />
  <path id="healthForeground" class="healthBars" d="m20,10 l330,0 l30,30 l-360,0 z" />
</svg>